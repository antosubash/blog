---
title: "Deploy .Net App to Azure App Service using GitHub Actions"
excerpt: "How to deploy a .Net app to Azure App Service using GitHub Actions"
date: "2023-08-15"
videoId: 
series: "Azure Deployment for .Net"
part: 1
tags: [ "Azure", "dotnet", "github", "github-actions", "azure-app-service" ]
---
## Table of contents

## Introduction

In this post, we will see how to deploy a .Net app to Azure App Service using GitHub Actions.

## Prerequisites

* GitHub Account
* Azure Account

## Create a GitHub Repository

### Install GitHub CLI

Install GitHub CLI from [here](https://cli.github.com/).

### Create a GitHub Repository

Create a GitHub repository using the following command.

```bash
gh repo create <repo-name> --public
```

### Clone the GitHub Repository

Clone the GitHub repository using the following command.

```bash
gh repo clone <repo-name>
```

## Create a .Net App

### Install .Net SDK

Install .Net SDK from [here](https://dotnet.microsoft.com/download).

### Create a .Net App

Create a .Net app using the following command.

```bash
dotnet new webapp -o <app-name>
```

### Run the .Net App

Run the .Net app using the following command.

```bash
dotnet run
```
For now we will only use the empty application.

## Create an Azure App Service

### Install Azure CLI

Install Azure CLI from [here](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli).

### Login to Azure

Login to Azure using the following command.

```bash
az login --use-device-code
```

### Create an Azure App Service

Create an Azure App Service using the following command.

```bash
az webapp up --name <app-name> --sku F1
```

### Get the Azure App Service Publish Profile

Get the Azure App Service publish profile using the following command.

```bash
az webapp deployment list-publishing-profiles --name <app-name> --output json --query "[?contains(publishMethod, 'FTP')].[publishUrl,userName,userPWD]" --output tsv
```

### Add the Azure App Service Publish Profile to GitHub Secrets

Add the Azure App Service publish profile to GitHub secrets using the following command.

```bash
gh secret set AzureAppService_PublishProfile_<app-name> --repo <repo-name> --body "<publish-profile>"
```

### Get the Azure Credentials

Get the Azure credentials using the following command.

```bash
az ad sp create-for-rbac --name "GitHubActions" --role contributor --scopes /subscriptions/<subscription-id>/resourceGroups/<resource-group> --sdk-auth
```

### Add the Azure Credentials to GitHub Secrets

Add the Azure credentials to GitHub secrets using the following command.

```bash
gh secret set AZURE_CREDENTIALS --repo <repo-name> --body "<azure-credentials>"
```


## Create a GitHub Action

### Create a GitHub Action

Create a GitHub Action using the following command.

```bash
dotnet new gitignore
```

### Create a GitHub Action Workflow

We will create a GitHub Action workflow to build, test, publish and deploy the .Net app to Azure App Service. Create a GitHub Action workflow using the following command.

#### Create a github workflow file

```bash
mkdir -p .github/workflows
new-item -path .github/workflows -name dotnet.yml -itemtype file
```

#### Update the GitHub Action Workflow

Update the GitHub Action workflow with the following content.

```yaml
name: .NET Core App CI

on:
  push:
    branches: [ main ]

jobs:
    build:
        runs-on: ubuntu-latest
    
        steps:
        - uses: actions/checkout@v2
    
        - name: Setup .NET Core
        uses: actions/setup-dotnet@v1
        with:
            dotnet-version: 5.0.x
    
        - name: Build with dotnet
        run: dotnet build --configuration Release
    
        - name: Test with dotnet
        run: dotnet test --no-restore --verbosity normal
    
        - name: Publish with dotnet
        run: dotnet publish -c Release -o ${{env.DOTNET_ROOT}}/myapp

        - name: Login via Azure CLI
        uses: azure/login@v1
        with:
            creds: ${{ secrets.AZURE_CREDENTIALS }}

        - name: Deploy to Azure Web App
        uses: azure/webapps-deploy@v2
        with:
            app-name: <app-name>
            slot-name: production
            publish-profile: ${{ secrets.AzureAppService_PublishProfile_<app-name> }}
            package: ${{env.DOTNET_ROOT}}/myapp
```

### Commit and Push the Changes

Commit and push the changes using the following commands.

```bash
git add .
git commit -m "Add GitHub Action workflow"
git push
```

## Conclusion

In this post, we saw how to deploy a .Net app to Azure App Service using GitHub Actions.

